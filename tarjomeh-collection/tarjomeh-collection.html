<link rel="import" href="../bower_components/polymer/polymer.html">

<link rel="import" href="../bower_components/firebase-element/firebase.html">
<link rel="import" href="../bower_components/firebase-element/firebase-collection.html">

<dom-module id="tarjomeh-collection">

  <template>

    <style>
    </style>
    
    <firebase-collection id="fbCollection" location="{{_computePath(path)}}" data="{{data}}" order-by-child="{{orderByChild}}" order-by-value="{{orderByValue}}"></firebase-collection>
    
  </template>

  <script>
    Polymer({
      is: "tarjomeh-collection",
      properties: {
         data: {
          type: Array,
          notify: true,
          value: function() {
            return [];
          }
        },
        path: {
          type: String,
          value: '',
          notify: true
        },
        orderByChild: {
          type: String,
          value: null,
          reflectToAttribute: true
        },
        orderByValue: {
          type: Boolean,
          value: false,
          reflectToAttribute: true
        }
      },
      
      _computePath: function(path) {
        return 'https://radiant-inferno-3701.firebaseio.com/' + path;
      },
      
      add: function(entry) {
        this.$.fbCollection.add(entry);
      },
      
      remove: function(entry) {
        this.$.fbCollection.remove(entry);
      },
      
      removeByKey: function(key) {
        this.$.fbCollection.removeByKey(key);
      },
      
      getByKey: function(key) {
        return this.$.fbCollection.getByKey(key);
      },
      
      addToChild: function(child, entry) {
        this.$.fbCollection.query.child(child).set(entry);
      }
    });
  </script>

</dom-module>